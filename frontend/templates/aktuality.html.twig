{% extends 'base.html.twig' %}

{% block title %}Aktuality{% endblock %}

{% block content %}
<div class="container py-4">
    <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('homepage') }}">Hlavní stránka</a></li>
            <li class="breadcrumb-item active" aria-current="page">Aktuality</li>
        </ol>
    </nav>

    <h1 class="fw-bolder mb-4 mb-md-5">Aktuality</h1>

    {% if tagy %}
        {% set initial_count = 10 %}
        <div class="tags" data-controller="tags-visibility" data-tags-visibility-initial-count-value="{{ initial_count }}">
            <p class="d-inline">
                {% for Tag in tagy %}
                    <a href="{{ path('aktuality_tag_filter', {'tag': Tag.slug}) }}" 
                       class="me-2 mb-2 custom-badge {% if Tag.slug == active_tag %}active_tag{% endif %} {% if loop.index0 >= initial_count %}d-none{% endif %}"
                       data-tags-visibility-target="tag">
                        {{ Tag.Tag }}
                    </a>
                {% endfor %}
                {% if tagy|length > initial_count %}
                    <button type="button" 
                            class="btn btn-link text-decoration-none p-0 ms-2"
                            data-tags-visibility-target="showMore"
                            data-action="click->tags-visibility#showAll">
                        Zobrazit více
                    </button>
                {% endif %}
            </p>
        </div>
    {% endif %}

    <div class="row">
        {% for aktualita in aktuality %}
            <div class="col-sm-6 col-md-4 col-lg-3 my-3">
                <a href="{{ path('detail_aktuality', {'slug': aktualita.slug}) }}" class="text-decoration-none pb-4 pb-sm-0 border-bottom-sm-only d-block">
                    <time class="small text-primary-emphasis">{{ aktualita.DatumZverejneni|date('d.m.Y') }}</time>

                    <h3 class="h5 mt-0 fw-bold">{{ aktualita.Nadpis }}</h3>

                    {% if aktualita.Tagy %}
                        <p class="mb-0">
                            {% for Tag in aktualita.Tagy %}
                                <span class="custom-badge me-2 mb-2">{{ Tag.Tag }}</span>
                            {% endfor %}
                        </p>
                    {% endif %}

                    {% if aktualita.Obrazek %}
                        <img class="img-fluid" src="{{ aktualita.Obrazek.url }}" alt="" aria-labelledby="aktualita-{{ aktualita.slug }}">
                    {% endif %}
                </a>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

